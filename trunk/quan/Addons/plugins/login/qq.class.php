<?php include_once( 'qq/config.php' );include_once( 'qq/qqauth.class.php' );class qq{	var $loginUrl;	function getUrl()	{		$o = qqauth::getInstance(QQ_APPID, QQ_APPKEY, QQ_CALLBACK, QQ_SCOPE);		$this->loginUrl = $o->qq_login();		return $this->loginUrl;	}		function initToken()	{		$o = qqauth::getInstance(QQ_APPID, QQ_APPKEY, QQ_CALLBACK, QQ_SCOPE);		$o->qq_callback();		return $_SESSION['qq']["access_token"];	}		function get_openid()	{		if(! isset($_SESSION['qq']["openid"]) || ! $_SESSION['qq']["openid"]){			$o = qqauth::getInstance(QQ_APPID, QQ_APPKEY, QQ_CALLBACK, QQ_SCOPE);			$_SESSION['qq']["openid"] = $o->get_openid();		}		return $_SESSION['qq']["openid"];	}	//用户资料	function userInfo()	{		$o = qqauth::getInstance(QQ_APPID, QQ_APPKEY, QQ_CALLBACK, QQ_SCOPE);		$user = $o->get_user_info($_SESSION['qq']["access_token"], $this->get_openid());		return $user;	}		/**	 * 发表一条微博	 *	 */	public function add_t($text)	{		$o = qqauth::getInstance(QQ_APPID, QQ_APPKEY, QQ_CALLBACK, QQ_SCOPE);		$return = $o->add_t($text, $_SESSION['qq']["access_token"], $this->get_openid());		return $return;	}		/**	 * 发表一条空间分享	 *	 */	public function add_share($title, $url, $site, $images)	{		$o = qqauth::getInstance(QQ_APPID, QQ_APPKEY, QQ_CALLBACK, QQ_SCOPE);		$return = $o->add_share($title, $url, $site, $images, $_SESSION['qq']["access_token"], $this->get_openid());		return $return;	}}